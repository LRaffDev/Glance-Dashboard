
  # =======================
  # HOME PAGE
  # =======================
  - name: Home

    #  https://github.com/glanceapp/glance/blob/main/docs/configuration.md#pages--columns
    head-widgets:

      # https://github.com/glanceapp/glance/blob/main/docs/configuration.md#markets
          - type: markets
            markets:
              - symbol: SPY
                name: S&P 500
              - symbol: BTC-USD
                name: Bitcoin
                chart-link: https://www.tradingview.com/chart/?symbol=INDEX:BTCUSD
              - symbol: NVDA
                name: NVIDIA
              - symbol: AAPL
                symbol-link: https://www.google.com/search?tbm=nws&q=apple
                name: Apple         


    columns:

      # -----------------------
      # SMALL COLUMN
      # -----------------------
      - size: small
        widgets:

          # https://github.com/glanceapp/glance/blob/main/docs/configuration.md#clock
          - type: clock
            hour-format: 24h
            timezones:
              - timezone: Europe/Rome
                label: Rome
              - timezone: America/New_York
                label: New York
              - timezone: Asia/Tokyo
                label: Tokyo

            # https://github.com/glanceapp/community-widgets/blob/main/widgets/time-bar/README.md
          - type: group
            widgets:
              - type: custom-api
                title: Day
                body-type: string
                skip-json-validation: true
                cache: 1s
                template: |
                  {{ $localTime := now }}
                  {{ $secondsPerDay := 86400 }}
                  {{ $elapsedSeconds := add (mul $localTime.Hour 3600) (mul $localTime.Minute 60) | add $localTime.Second }}
                  {{ $dayProgress := div (mul $elapsedSeconds 100.0) $secondsPerDay }}

                  {{ $gradient := "" }}
                  {{ if lt $dayProgress 10.0 }}
                    {{ $gradient = "#70a1ff" }}
                  {{ else if lt $dayProgress 25.0 }}
                    {{ $gradient = "#ff6b6b, #70a1ff" }}
                  {{ else if lt $dayProgress 50.0 }}
                    {{ $gradient = "#ff6b6b, #f8e71c, #7ed6df" }}
                  {{ else }}
                    {{ $gradient = "#ff6b6b, #f8e71c, #7ed6df, #70a1ff" }}
                  {{ end }}

                  <div style="font-family: sans-serif; text-align: center;">
                    <div style="width: 100%; height: 12px; background: #23262F; border:1px solid gray; border-radius: 10px; overflow: hidden;">
                      <div style="
                        height: 100%;
                        width: {{ $dayProgress }}%;
                        background: linear-gradient(90deg, {{ $gradient }});
                      "></div>
                    </div>
                    <div class="size-h1" style="margin-top: 6px;">{{ printf "%.2f" $dayProgress }}% of the day has passed</div>
                  </div>           

          # https://github.com/glanceapp/glance/blob/main/docs/configuration.md#calendar
          - type: calendar
            hide-header: true
            first-day-of-week: monday


      # -----------------------
      # FULL COLUMN
      # -----------------------
      - size: full
        widgets:

          # https://github.com/glanceapp/glance/blob/main/docs/configuration.md#search-widget
          - type: search
            hide-header: true
            search-engine: duckduckgo
            new-tab: true
            bangs:
              - title: YouTube
                shortcut: "!yt"
                url: https://www.youtube.com/results?search_query={QUERY}
              - title: Steam
                shortcut: "steam"  
                url: https://store.steampowered.com/search/?term={QUERY}




          # https://github.com/glanceapp/glance/blob/main/docs/configuration.md#rss
          
          - type: group
            widgets:
              - type: rss
                title: Bloomberg
                limit: 15
                collapse-after: 6
                cache: 6h
                feeds:
                  - url: https://feeds.bloomberg.com/markets/news.rss
                    title: Bloomberg

              - type: rss
                title: Fox Business
                limit: 15
                collapse-after: 6
                cache: 6h
                feeds:
                  - url: https://moxie.foxbusiness.com/google-publisher/markets.xml
                    title: Fox Business


      # -----------------------
      # SMALL COLUMN
      # -----------------------
      - size: small
        widgets:

          # https://github.com/glanceapp/glance/blob/main/docs/configuration.md#weather
          - type: weather
            units: metric
            hour-format: 12h
            location: Naples, Italy

          # https://github.com/glanceapp/community-widgets/blob/main/widgets/spotify-now-playing/README.md
            - type: custom-api
                title: Spotify
                cache: 30s
                frameless: true
                url: https://${NOW_PLAYING}.web.val.run/
                template: |
                    <div class="widget-content-frame flex flex-row justify-start items-center gap-20">
                    <div>
                        <img src={{ .JSON.String "image" }} style="border-radius: 5px; min-width: 8rem; max-width: 8rem" class="card">
                    </div>
                    <div class="flex grow flex-column justify-center" style="padding-right: 1rem">
                        <div class="color-positive size-h4">{{ .JSON.String "shortenedName" }}</div>
                        <div class="size-h4">{{ .JSON.String "formattedArtist" }}</div>
                    </div>
                    </div>

          # https://github.com/glanceapp/community-widgets/blob/main/widgets/random-fact/README.md
          - type: custom-api
            hide-header: true
            title: Random Fact
            cache: 3h
            url: https://uselessfacts.jsph.pl/api/v2/facts/random
            template: |
              <p class="size-h4 color-paragraph">{{ .JSON.String "text" }}</p>

